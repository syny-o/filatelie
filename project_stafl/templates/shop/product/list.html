{% extends '../../base/base.html' %}

{% load static %}

{% block content %}


{% include 'base/breadcrumb.html' %}


<!-- ========== Start COLLECTION Section ========== -->
<section class="shop-collection-section section-md-t-space section-b-space">
  <div class="custom-container">
    <div class="row g-xl-4 g-lg-5">
      <div class="col-xxl-3 col-lg-4">
        {% include './filter.html' %}
      </div>
      <div class="col-xxl-9 col-lg-8">
        <div class="right-product-box">
          <div class="grid-filter-box">

            <h5>Celkem: {{ products|length }}</h5>
            <div class="right-side-filter">
              <span class="sort-by-title">Seřadit:</span>
              <div class="dropdown featured-menu right-featured-menu">

                <form id="ordering-form" action="{% url 'shop:product_list' %}">
                  {% for c in selected_categories %}
                  <input type="hidden" name="categories" value="{{ c }}">
                  {% endfor %}
                  <select id="ordering-combo" name="ordering-criteria" class="drop-btn dropdown-toggle select-dropdown">
                    <option value="price" {% if ordering_criteria == "price" %} selected {% endif %} 
                      class="dropdown-item select-item">dle ceny vzestupně</option>
                    <option value="-price" {% if ordering_criteria == "-price" %} selected {% endif %}
                      class="dropdown-item select-item">dle ceny sestupně</option>

                    <option value="name" {% if ordering_criteria == "name" %} selected {% endif %} 
                      class="dropdown-item select-item">Od A po Z</option>
                    <option value="-name" {% if ordering_criteria == "-name" %} selected {% endif %}
                      class="dropdown-item select-item">Od Z po A</option>
                  </select>
                </form>
              </div>
            </div>
          </div>
          <div
            class="row product-list-section g-sm-4 g-3 row-cols-xxl-4 row-cols-xl-3 row-cols-lg-2 row-cols-md-3 row-cols-2 mt-0 ratio_product load-more-list"
            id="load-more-list">

            {% include './cards.html' %}


          </div>

        </div>
      </div>
    </div>
  </div>
</section>
<!-- ========== End COLLECTION Section ========== -->


<script>
  document.getElementById('ordering-combo').addEventListener('change', function () {
    document.getElementById('ordering-form').submit(); // Automatically submit the form
  });
</script>

{% endblock %}